function ImageNameResolver(datetime){this._pathToImages="https://raw.githubusercontent.com/soucik/ChatkaKatka/dev/images/weather/",this._suffixes=new Array(".jpg",".png"),this._datetime=datetime,this._hour=this._datetime.getHours(),this._partOfDay=this.getPartOfDay(this._hour)}function Chat(server){self=this,this._server=server,this._connection=null,this._name=null}ImageNameResolver.prototype.getPartOfDay=function(){switch(!0){case this._hour>=5&&this._hour<7:return"sunrise";case this._hour>=18&&this._hour<=20:return"sunset";case this._hour>20&&this._hour<=24||this._hour>=0&&this._hour<5:return"night";default:return"day"}},ImageNameResolver.prototype.getFullPath=function(){return this._pathToImages+this._partOfDay+this._suffixes[0]},Chat.prototype.connect=function(){self._socket=io.connect(this._server)},Chat.prototype.handlers=function(){self._socket.on("updatechat",function(username,data){$("#chatContent").append("<b>"+username+":</b> "+data+"<br>")})},Chat.prototype.sendMessage=function(message){console.log("SEND MESSAGE"),self._socket.emit("sendchat",message)},Chat.prototype.connectUser=function(username){console.log("SET NAME"),self._socket.emit("adduser",username,"AF313C6D972BB5D01908CB9DA8EB1CB8A64FCCEFF96773BF0BC7275E21079B5D321A264E7B0DB0643C5C5D199FD19A1190EA984A78384FDE3B2BB31902A809B6"),self._name=username},$().ready(function(){var count=0;function looping(){$(".glyphicon-menu-down").animate({top:"+=20px"},1e3),$(".glyphicon-menu-down").animate({top:"-=20px"},500),(count+=1)<=3&&looping()}function loopingContact(){$("#contact-us").animate({zoom:"1.1"},2e3),$("#contact-us").animate({zoom:"1.0"},2e3),(count+=1)<=300&&loopingContact()}$('[data-target="#peopleCount"]').waypoint(function(){looping()},{offset:"100%"}),loopingContact(),$("form input").keypress(function(e){return!(e.which&&13==e.which||e.keyCode&&13==e.keyCode)||($("#datasend").click(),!1)});var datetime,resolver=new ImageNameResolver(new Date),questionButton,initPhotoSwipeFromDOM;$("body").css({background:"url("+resolver.getFullPath()+")  no-repeat","background-size":"100% auto","background-color":"#738535"}),$("#questionButton").one("click",function(){chat=new Chat("ws://services-2320.rostiapp.cz")}),$("#datasend").on("click",function(){var userInput=$("#chatInput").val();chat._name?chat.sendMessage(userInput):(chat.connect(),chat.handlers(),chat.connectUser(userInput),$(".control-label").text("Správa: "),$("#datasend").val("Poslať")),$("#chatInput").val("")}),function(gallerySelector){for(var parseThumbnailElements=function(el){for(var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item,i=0;i<numNodes;i++)1===(figureEl=thumbElements[i]).nodeType&&(size=(linkEl=figureEl.children[0]).getAttribute("data-size").split("x"),item={src:linkEl.getAttribute("href"),w:parseInt(size[0],10),h:parseInt(size[1],10)},figureEl.children.length>1&&(item.title=figureEl.children[1].innerHTML),linkEl.children.length>0&&(item.msrc=linkEl.children[0].getAttribute("src")),item.el=figureEl,items.push(item));return items},closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn))},onThumbnailsClick=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var eTarget=e.target||e.srcElement,clickedListItem=closest(eTarget,function(el){return el.tagName&&"FIGURE"===el.tagName.toUpperCase()});if(clickedListItem){for(var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index,i=0;i<numChildNodes;i++)if(1===childNodes[i].nodeType){if(childNodes[i]===clickedListItem){index=nodeIndex;break}nodeIndex++}return index>=0&&openPhotoSwipe(index,clickedGallery),!1}},photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5)return params;for(var vars=hash.split("&"),i=0;i<vars.length;i++)if(vars[i]){var pair=vars[i].split("=");pair.length<2||(params[pair[0]]=pair[1])}return params.gid&&(params.gid=parseInt(params.gid,10)),params},openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll(".pswp")[0],gallery,options,items;if(items=parseThumbnailElements(galleryElement),options={galleryUID:galleryElement.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName("img")[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width}}},fromURL)if(options.galleryPIDs){for(var j=0;j<items.length;j++)if(items[j].pid==index){options.index=j;break}}else options.index=parseInt(index,10)-1;else options.index=parseInt(index,10);isNaN(options.index)||(disableAnimation&&(options.showAnimationDuration=0),(gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options)).init())},galleryElements=document.querySelectorAll(gallerySelector),i=0,l=galleryElements.length;i<l;i++)galleryElements[i].setAttribute("data-pswp-uid",i+1),galleryElements[i].onclick=onThumbnailsClick;var hashData=photoswipeParseHash();hashData.pid&&hashData.gid&&openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],!0,!0)}(".my-gallery")});